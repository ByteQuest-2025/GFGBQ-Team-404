<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScamGuard - Real-Time Call Protection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        @keyframes pulse-border {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            50% { box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); }
        }
        .danger-pulse {
            animation: pulse-border 2s infinite;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .shake {
            animation: shake 0.5s;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white min-h-screen">
    <div class="max-w-7xl mx-auto p-4">
        <div class="grid lg:grid-cols-4 gap-6">
            
            <!-- Main Content (Left 3 columns) -->
            <div class="lg:col-span-3 space-y-6">
                
                <!-- Header -->
                <div class="text-center pt-6">
                    <div class="flex items-center justify-center gap-3 mb-3">
                        <span class="text-5xl">üõ°Ô∏è</span>
                        <h1 class="text-5xl font-bold">ScamGuard</h1>
                    </div>
                    <p class="text-slate-300 text-xl">Real-Time Call Protection for Vulnerable Users</p>
                    <p class="text-slate-400 text-sm mt-2">Protecting elderly and digitally unaware users from phone scams</p>
                </div>



                <!-- Status & Emergency -->
                <div class="grid md:grid-cols-2 gap-4">
                    <!-- Status Indicator -->
                    <div class="bg-slate-800 rounded-lg p-4 border border-slate-700 shadow-sm">
                        <div class="flex items-center gap-3">
                            <div id="statusIndicator" class="w-4 h-4 rounded-full bg-gray-500"></div>
                            <span id="statusText" class="text-lg text-white">Not listening</span>
                        </div>
                        <p id="micStatus" class="text-sm text-slate-400 mt-2">Click "Start Monitoring" to begin</p>
                        <p id="callDuration" class="text-xs text-slate-500 mt-1">Duration: 0:00</p>
                    </div>

                    <!-- Emergency Button -->
                    <div id="emergencyContainer" class="bg-slate-800 rounded-lg p-4 border border-slate-700 shadow-sm">
                        <button id="emergencyBtn" class="w-full h-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 rounded-lg font-bold text-2xl py-6 transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            üö® EMERGENCY<br/>
                            <span class="text-base">End Call & Get Help</span>
                        </button>
                    </div>
                </div>

                <!-- Risk Meter -->
                <div id="riskMeterContainer" class="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-3xl font-bold text-white">Risk Level</h2>
                        <div class="text-right">
                            <span id="riskPercent" class="text-3xl font-bold text-green-400">0%</span>
                            <p id="confidenceText" class="text-xs text-slate-400">Confidence: High</p>
                        </div>
                    </div>
                    
                    <div class="relative h-10 bg-slate-700 rounded-full overflow-hidden mb-3">
                        <div id="riskBar" class="h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500 flex items-center justify-center" style="width: 0%">
                            <span id="riskLabel" class="text-sm font-bold text-white px-2"></span>
                        </div>
                    </div>

                    <div id="highRiskWarning" class="hidden bg-red-900/50 border-2 border-red-500 rounded-lg p-4 mt-4">
                        <div class="flex items-center gap-3">
                            <span class="text-4xl animate-pulse">‚ö†Ô∏è</span>
                            <div>
                                <p class="font-bold text-2xl text-red-300">DANGER: HIGH RISK SCAM DETECTED</p>
                                <p class="text-red-200 text-lg mt-1">This call shows multiple scam indicators. Consider ending immediately.</p>
                                <p class="text-red-300 text-sm mt-2">‚úì Hang up now  ‚úì Don't share information  ‚úì Report to authorities</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="flex gap-4">
                    <button id="toggleBtn" class="flex-1 py-8 rounded-xl font-bold text-2xl bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white transition-all shadow-lg">
                        üé§ Start Monitoring
                    </button>
                    
                    <button id="resetBtn" class="px-8 py-8 bg-slate-700 hover:bg-slate-600 rounded-xl transition-all shadow-sm" title="Reset">
                        <span class="text-3xl">üîÑ</span>
                    </button>
                </div>

                <!-- Alerts with Timeline -->
                <div id="alertsContainer" class="hidden bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-sm">
                    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 text-white">
                        <span class="text-3xl">‚ö†Ô∏è</span>
                        Detected Threats
                    </h2>
                    <div id="alertsList" class="space-y-3"></div>
                </div>

                <!-- Live Transcript -->
                <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-sm">
                    <h2 class="text-2xl font-bold mb-4 flex items-center gap-2 text-white">
                        <span class="text-3xl">üìû</span>
                        Live Transcript
                    </h2>
                    <div class="bg-slate-900 rounded-lg p-4 min-h-[200px] max-h-[400px] overflow-y-auto border border-slate-700">
                        <p id="transcript" class="text-slate-500 italic text-lg">Click "Start Monitoring" to begin detecting scams</p>
                    </div>
                </div>

                <!-- Call Summary -->
                <div id="summaryContainer" class="hidden bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-xl p-6 border-2 border-purple-500 shadow-lg">
                    <h2 class="text-2xl font-bold mb-4 text-white flex items-center gap-2">
                        <span class="text-3xl">üìä</span>
                        Call Analysis Summary
                    </h2>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div class="bg-slate-800/50 rounded-lg p-4">
                            <p class="text-slate-400 text-sm">Call Duration</p>
                            <p id="summaryDuration" class="text-2xl font-bold text-white">0:00</p>
                        </div>
                        <div class="bg-slate-800/50 rounded-lg p-4">
                            <p class="text-slate-400 text-sm">Threats Detected</p>
                            <p id="summaryThreats" class="text-2xl font-bold text-red-400">0</p>
                        </div>
                        <div class="bg-slate-800/50 rounded-lg p-4">
                            <p class="text-slate-400 text-sm">Final Risk Level</p>
                            <p id="summaryRisk" class="text-2xl font-bold text-green-400">Low</p>
                        </div>
                    </div>
                    <div class="mt-4 bg-slate-800/50 rounded-lg p-4">
                        <p class="text-white font-bold mb-2">üéØ Recommendation:</p>
                        <p id="summaryRecommendation" class="text-slate-300 text-lg">No immediate threats detected.</p>
                    </div>
                    <button id="downloadReport" class="mt-4 px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-bold transition-all">
                        üì• Download Report
                    </button>
                </div>

            </div>

            <!-- Sidebar (Right column) -->
            <div class="lg:col-span-1 space-y-6">
                
                <!-- Education Panel -->
                <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">üìö</span>
                        Common Scam Tactics
                    </h3>
                    <div class="space-y-3 text-sm">
                        <div class="bg-slate-900 rounded-lg p-3">
                            <p class="text-yellow-400 font-bold">‚ö° Urgency Pressure</p>
                            <p class="text-slate-300">"Act now or face consequences"</p>
                        </div>
                        <div class="bg-slate-900 rounded-lg p-3">
                            <p class="text-purple-400 font-bold">üë§ Impersonation</p>
                            <p class="text-slate-300">Pretending to be IRS, bank, tech support</p>
                        </div>
                        <div class="bg-slate-900 rounded-lg p-3">
                            <p class="text-red-400 font-bold">üí∞ Payment Requests</p>
                            <p class="text-slate-300">Gift cards, wire transfers, cryptocurrency</p>
                        </div>
                        <div class="bg-slate-900 rounded-lg p-3">
                            <p class="text-orange-400 font-bold">üîê Info Fishing</p>
                            <p class="text-slate-300">Asking for SSN, passwords, PIN codes</p>
                        </div>
                    </div>
                </div>

                <!-- What To Do -->
                <div class="bg-green-900/30 rounded-xl p-6 border-2 border-green-500">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                        <span class="text-2xl">‚úÖ</span>
                        If Risk is High
                    </h3>
                    <ol class="space-y-2 text-slate-300 text-sm list-decimal list-inside">
                        <li class="font-bold text-white">Hang up immediately</li>
                        <li>Don't provide any information</li>
                        <li>Don't call back the number</li>
                        <li>Report to authorities (FTC.gov)</li>
                        <li>Tell a trusted family member</li>
                        <li>Block the number</li>
                    </ol>
                </div>


            </div>

        </div>
    </div>

    <script>
        let isListening = false;
        let callStartTime = null;
        let callDurationInterval = null;
        let riskScore = 0;
        let threatsDetected = 0;
        let callsMonitored = 0;
        let scamsBlocked = 0;

        // Update call duration
        function updateCallDuration() {
            if (callStartTime) {
                const elapsed = Math.floor((Date.now() - callStartTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('callDuration').textContent = `Duration: ${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // Play alert sound
        function playAlertSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            gainNode.gain.value = 0.3;
            
            oscillator.start();
            setTimeout(() => oscillator.stop(), 200);
        }

        // Toggle listening
        document.getElementById('toggleBtn').addEventListener('click', function() {
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            const micStatus = document.getElementById('micStatus');
            const emergencyBtn = document.getElementById('emergencyBtn');
            const btn = this;
            
            if (btn.textContent.includes('Start')) {
                // Start monitoring
                isListening = true;
                callStartTime = Date.now();
                callDurationInterval = setInterval(updateCallDuration, 1000);
                callsMonitored++;
                
                btn.textContent = 'üîá Stop Monitoring';
                btn.className = 'flex-1 py-8 rounded-xl font-bold text-2xl bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white transition-all shadow-lg';
                statusIndicator.className = 'w-4 h-4 rounded-full bg-green-500 animate-pulse';
                statusText.textContent = 'Listening...';
                micStatus.textContent = 'üé§ Microphone active - Monitoring for threats';
                emergencyBtn.disabled = false;
                
                document.getElementById('summaryContainer').classList.add('hidden');
            } else {
                stopMonitoring();
            }
        });

        function stopMonitoring() {
            isListening = false;
            clearInterval(callDurationInterval);
            
            const btn = document.getElementById('toggleBtn');
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            const micStatus = document.getElementById('micStatus');
            const emergencyBtn = document.getElementById('emergencyBtn');
            
            btn.textContent = 'üé§ Start Monitoring';
            btn.className = 'flex-1 py-8 rounded-xl font-bold text-2xl bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white transition-all shadow-lg';
            statusIndicator.className = 'w-4 h-4 rounded-full bg-gray-500';
            statusText.textContent = 'Not listening';
            micStatus.textContent = 'Click "Start Monitoring" to begin';
            emergencyBtn.disabled = true;
            
            // Show summary
            showCallSummary();
        }

        // Show call summary
        function showCallSummary() {
            const container = document.getElementById('summaryContainer');
            const duration = document.getElementById('callDuration').textContent.replace('Duration: ', '');
            
            document.getElementById('summaryDuration').textContent = duration;
            document.getElementById('summaryThreats').textContent = threatsDetected;
            
            let riskLevel = 'Low';
            let riskColor = 'text-green-400';
            let recommendation = 'No immediate threats detected. Call appeared legitimate.';
            
            if (riskScore >= 60) {
                riskLevel = 'High';
                riskColor = 'text-red-400';
                recommendation = '‚ö†Ô∏è MULTIPLE SCAM INDICATORS DETECTED. This call was highly suspicious. Do not provide any information or payment.';
                scamsBlocked++;
            } else if (riskScore >= 30) {
                riskLevel = 'Medium';
                riskColor = 'text-yellow-400';
                recommendation = 'Some suspicious patterns detected. Exercise caution and verify caller identity through official channels.';
            }
            
            document.getElementById('summaryRisk').textContent = riskLevel;
            document.getElementById('summaryRisk').className = `text-2xl font-bold ${riskColor}`;
            document.getElementById('summaryRecommendation').textContent = recommendation;
            
            container.classList.remove('hidden');
        }

        // Emergency button
        document.getElementById('emergencyBtn').addEventListener('click', function() {
            playAlertSound();
            this.classList.add('shake');
            setTimeout(() => this.classList.remove('shake'), 500);
            
            if (confirm('üö® EMERGENCY MODE ACTIVATED\n\nThis will:\n‚Ä¢ End the call immediately\n‚Ä¢ Save the transcript\n‚Ä¢ Display help resources\n\nContinue?')) {
                stopMonitoring();
                alert('‚úÖ Call ended. Transcript saved.\n\nüìû Report scams to:\n‚Ä¢ FTC: reportfraud.ftc.gov\n‚Ä¢ Local police non-emergency line\n\nYou are safe now.');
            }
        });

        // Reset button
        document.getElementById('resetBtn').addEventListener('click', function() {
            document.getElementById('transcript').innerHTML = '<p class="text-slate-500 italic text-lg">Click "Start Monitoring" to begin detecting scams</p>';
            document.getElementById('alertsList').innerHTML = '';
            document.getElementById('alertsContainer').classList.add('hidden');
            document.getElementById('riskBar').style.width = '0%';
            document.getElementById('riskPercent').textContent = '0%';
            document.getElementById('riskPercent').className = 'text-3xl font-bold text-green-400';
            document.getElementById('riskLabel').textContent = '';
            document.getElementById('riskBar').className = 'h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500 flex items-center justify-center';
            document.getElementById('highRiskWarning').classList.add('hidden');
            document.getElementById('summaryContainer').classList.add('hidden');
            document.getElementById('riskMeterContainer').classList.remove('danger-pulse');
            riskScore = 0;
            threatsDetected = 0;
        });



        // Download report
        document.getElementById('downloadReport').addEventListener('click', function() {
            const duration = document.getElementById('summaryDuration').textContent;
            const threats = document.getElementById('summaryThreats').textContent;
            const risk = document.getElementById('summaryRisk').textContent;
            const recommendation = document.getElementById('summaryRecommendation').textContent;
            const transcript = document.getElementById('transcript').textContent;
            
            const report = `SCAMGUARD CALL ANALYSIS REPORT
Generated: ${new Date().toLocaleString()}

CALL SUMMARY
Duration: ${duration}
Threats Detected: ${threats}
Risk Level: ${risk}

RECOMMENDATION
${recommendation}

FULL TRANSCRIPT
${transcript}

DETECTED THREATS
${document.getElementById('alertsList').innerText}

---
ScamGuard - Protecting vulnerable users from phone scams
Report issues to: support@scamguard.app`;

            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `scamguard-report-${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        });
    </script>
</body>
</html>